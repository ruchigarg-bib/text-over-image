{"code":"!function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,\"a\",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p=\"\",s(s.s=0)}([function(t,e,s){s(1);var n=new SDK;$(\"#image\").on(\"change\",(function(){var t;$(\"#showImage\").html('<img src=\"'+$(this).val()+'\" style=\"width=600px;\"/>'),t=$(this).val(),n.getData((function(e){var s;console.log(\"Inside SaveText - Data:\"+JSON.stringify(e,null,2)),s=e.numberOfEdits||0,e.dataArray?(e.dataArray.image=t,console.log(\"Adding new values:\"+JSON.stringify(e,null,2))):console.log(\"Causing Trouble!!\"),n.setData({numberOfEdits:s+1,dataArray:e.dataArray}),console.log(\"Inside Update Object:\"+JSON.stringify(e,null,2)),Console.log(\"After SaveText setData:\"+JSON.stringify(e.dataArray,null,2)),$(\"currentResponse\").html(JSON.stringify(e,null,2))})),n.getContent((function(e){console.log(\"Inside SaveCOntent:\"+JSON.stringify(e,null,2)),e='<img src=\"'+t+'\" style=\"width:600px; height:300px;display:block;margin:0 auto;\"/>',n.setContent(e,(function(t){console.log(\"setContent:\"+JSON.stringify(t,null,2))}))}))})),n.getData((function(t){var e=t.numberOfEdits||0;console.log(JSON.stringify(e,null,2));var s='<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\"><tr><td background=\"'+t.dataArray.image+'\" height=\"300\"></td></tr></table>';0==e?n.setData({numberOfEdits:e+1,dataArray:{imgURL:\"0\"}}):($(\"#showImage\").html(s),$(\"#image\").val(t.dataArray.image),$(\"currentResponse\").html(JSON.stringify(t,null,2))),console.log(JSON.stringify(t.dataArray,null,2))}))},function(t,e,s){var n=function(t,e,s){Array.isArray(t)&&(s=e=t,t=void 0),this._whitelistOverride=e,this._sslOverride=s,this._messageId=1,this._messages={0:function(){}},this._readyToPost=!1,this._pendingMessages=[],this._receiveMessage=this._receiveMessage.bind(this),window.addEventListener(\"message\",this._receiveMessage,!1),window.parent.postMessage({method:\"handShake\",origin:window.location.origin,payload:t},\"*\")};n.prototype.execute=function(t,e){var s=(e=e||{}).data,n=e.success;this._readyToPost?this._post({method:t,payload:s},n):this._pendingMessages.push({method:t,payload:s,callback:n})},n.prototype.getCentralData=function(t){this.execute(\"getCentralData\",{success:t})},n.prototype.getContent=function(t){this.execute(\"getContent\",{success:t})},n.prototype.getData=function(t){this.execute(\"getData\",{success:t})},n.prototype.getUserData=function(t){this.execute(\"getUserData\",{success:t})},n.prototype.getView=function(t){this.execute(\"getView\",{success:t})},n.prototype.setBlockEditorWidth=function(t,e){this.execute(\"setBlockEditorWidth\",{data:t,success:e})},n.prototype.setCentralData=function(t,e){this.execute(\"setCentralData\",{data:t,success:e})},n.prototype.setContent=function(t,e){this.execute(\"setContent\",{data:t,success:e})},n.prototype.setData=function(t,e){this.execute(\"setData\",{data:t,success:e})},n.prototype.setSuperContent=function(t,e){this.execute(\"setSuperContent\",{data:t,success:e})},n.prototype.triggerAuth=function(t){this.getUserData((function(e){var s=e.stack;0===s.indexOf(\"qa\")&&(s=s.substring(3,5)+\".\"+s.substring(0,3));var n=document.createElement(\"IFRAME\");n.src=\"https://mc.\"+s+\".exacttarget.com/cloud/tools/SSO.aspx?appId=\"+t+\"&restToken=1&hub=1\",n.style.width=\"1px\",n.style.height=\"1px\",n.style.position=\"absolute\",n.style.top=\"0\",n.style.left=\"0\",n.style.visibility=\"hidden\",n.className=\"authframe\",document.body.appendChild(n)}))},n.prototype.triggerAuth2=function(t){var e=document.createElement(\"IFRAME\"),s=\"\",n=\"\";Array.isArray(t.scope)&&(s=\"&scope=\"+t.scope.join(\"%20\")),t.state&&(n=\"&state=\"+t.state),e.src=t.authURL+(t.authURL.endsWith(\"/\")?\"\":\"/\")+\"v2/authorize?response_type=code&client_id=\"+t.clientId+\"&redirect_uri=\"+encodeURIComponent(t.redirectURL)+s+n,e.style.width=\"1px\",e.style.height=\"1px\",e.style.position=\"absolute\",e.style.top=\"0\",e.style.left=\"0\",e.style.visibility=\"hidden\",e.className=\"authframe\",document.body.appendChild(e)},n.prototype._executePendingMessages=function(){var t=this;this._pendingMessages.forEach((function(e){t.execute(e.method,{data:e.payload,success:e.callback})})),this._pendingMessages=[]},n.prototype._post=function(t,e){this._messages[this._messageId]=e,t.id=this._messageId,this._messageId+=1,window.parent.postMessage(t,this._parentOrigin)},n.prototype._receiveMessage=function(t){var e=(t=t||{}).data||{};if(\"handShake\"===e.method&&this._validateOrigin(e.origin))return this._parentOrigin=e.origin,this._readyToPost=!0,void this._executePendingMessages();this._parentOrigin&&this._parentOrigin===t.origin&&((this._messages[e.id||0]||function(){})(e.payload),delete this._messages[e.id])},n.prototype._validateOrigin=function(t){for(var e=this._whitelistOverride||[\"exacttarget\\\\.com\",\"marketingcloudapps\\\\.com\",\"blocktester\\\\.herokuapp\\\\.com\"],s=0;s<e.length;s++){var n=this._sslOverride?\"?\":\"\",i=\"exacttarget\\\\.com\"===e[s]?\"mc\\\\.\":\"\";if(new RegExp(\"^https\"+n+\"://\"+i+\"([a-zA-Z0-9-]+\\\\.)*\"+e[s]+\"(:[0-9]+)?$\",\"i\").test(t))return!0}return!1},\"object\"==typeof window&&(window.sfdc=window.sfdc||{},window.sfdc.BlockSDK=n),t.exports=n}]);","extractedComments":[]}